<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>k-pop</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <link rel="stylesheet" href="../css/k-pop.css" />
  </head>
  <body>
    <head>
      <a href="../html/main.html">
        <span>home</span>
      </a>
      <div class="gallery">
        <div class="gallery-container">
          <img
            class="gallery-item gallery-item-1"
            src="../img/carousel/있지.jpg"
            data-index="1"
          />
          <img
            class="gallery-item gallery-item-2"
            src="../img/carousel/아이유&박재범.jpg"
            data-index="2"
          />
          <img
            class="gallery-item gallery-item-3"
            src="../img/carousel/나연.jpg"
            data-index="3"
          />
          <img
            class="gallery-item gallery-item-4"
            src="../img/carousel/키스오브 라이프 앨범.jpg"
            data-index="4"
          />
          <img
            class="gallery-item gallery-item-5"
            src="../img/carousel/샤이니.jpg"
            data-index="5"
          />
        </div>

        <div class="gallery-controls"></div>
      </div>
    </head>
   <main class="main">
      <div class="left">
       <div class="list">
        <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
       </ul>
       </div>
     </div>

      <div class="right">
        <P>신곡</P>
        <div id="sliderWrap">
          <ul class="slider">
            <li>
              <div class="itemWrap"><img src="../img/K-pop/홀씨 - 아이유.jpeg" width="100%" height="100%"></div>
            </li>
            <li>
              <div class="itemWrap"><img src="../img/K-pop/super lady - 여자 아이들.jpeg" width="60%" height="80%"></div>
            </li>
            <li>
              <div class="itemWrap"></div>
            </li>
            <li>
              <div class="itemWrap"></div>
            </li>
            <li>
              <div class="itemWrap"></div>
            </li>
           
          </ul>
          <div id="btn" class="directionNav">
            <button id="prev" class="btn">prev</button>
            <button id="next" class="btn">next</button>
          </div>
          <ul class="dot">
            <li class="dots on">btn01</li>
            <li class="dots">btn02</li>
            <li class="dots">btn03</li>
            <li class="dots">btn04</li>
            <li class="dots">btn05</li>
          </ul>
      </div>
    </main>
    <footer>
      <div class=""></div>
    </footer>
  </body>
</html>
<script>
  const galleryContainer = document.querySelector(".gallery-container");
  const galleryControlsContainer = document.querySelector(".gallery-controls");
  const galleryControls = ["previous", "next"];
  const galleryItems = document.querySelectorAll(".gallery-item");

  class Carousel {
    constructor(container, items, controls) {
      this.carouselContainer = container;
      this.carouselControls = controls;
      this.carouselArray = [...items];
    }
    updateGallery() {
      this.carouselArray.forEach((el) => {
        el.classList.remove("gallery-item-1");
        el.classList.remove("gallery-item-2");
        el.classList.remove("gallery-item-3");
        el.classList.remove("gallery-item-4");
        el.classList.remove("gallery-item-5");
      });

      this.carouselArray.slice(0, 5).forEach((el, i) => {
        el.classList.add(`gallery-item-${i + 1}`);
      });
    }
    setCurrentState(direction) {
      if (direction.className == "gallery-controls-previous") {
        this.carouselArray.unshift(this.carouselArray.pop());
      } else {
        this.carouselArray.push(this.carouselArray.shift());
      }
      this.updateGallery();
    }
    setControls() {
      this.carouselControls.forEach((control) => {
        galleryControlsContainer.appendChild(
          document.createElement("button")
        ).className = `gallery-controls-${control}`;
        document.querySelector(`.gallery-controls-${control}`).innerText =
          control;
      });
    }
    useControls() {
      const triggers = [...galleryControlsContainer.childNodes];
      triggers.forEach((control) => {
        control.addEventListener("click", (e) => {
          e.preventDefault();
          this.setCurrentState(control);
        });
      });
    }
  }
  const exampleCarousel = new Carousel(
    galleryContainer,
    galleryItems,
    galleryControls
  );
  exampleCarousel.setControls();
  exampleCarousel.useControls();

  // 신곡 자동 캐러셀
  function initializeSlider() {
  const slideWrapper = document.getElementById('sliderWrap');
  const slider = document.querySelector('#sliderWrap .slider');
  const slides = document.querySelectorAll('#sliderWrap .slider li');
  const sliderWidth = slideWrapper.clientWidth;
  const totalSlides = slides.length;
  
  let slideIndex = 0;
  let autoSlider;

  // Set slide widths
  slides.forEach(function (element) {
    element.style.width = sliderWidth + 'px';
  });

  slider.style.width = sliderWidth * totalSlides + 'px';

  // Next, Prev, Pagination
  const nextBtn = document.getElementById('next');
  const prevBtn = document.getElementById('prev');
  const dot = document.querySelector('.dot');
  const allBtn = document.getElementById('btn');

  function plusSlides(n) {
    showSlides(slideIndex + n);
  }

  function showSlides(n) {
    slideIndex = (n + totalSlides) % totalSlides;
    slider.style.left = -(sliderWidth * slideIndex) + 'px';
    pagination();
  }

  function currentSlides(n) {
    showSlides(n);
  }

  function pagination() {
    const dots = document.querySelectorAll('.dot li');
    dots.forEach(function (element) {
      element.classList.remove('on');
    });
    dots[slideIndex].classList.add('on');
  }

  // Handle dot clicks
  dot.addEventListener('click', function (event) {
    if (event.target.tagName === 'LI') {
      showSlides(Array.from(event.target.parentNode.children).indexOf(event.target));
    }
  });

  // Handle button clicks
  nextBtn.addEventListener('click', function () {
    plusSlides(1);
  });

  prevBtn.addEventListener('click', function () {
    plusSlides(-1);
  });

  // Handle hover
  const hoverElements = [allBtn, dot];

  hoverElements.forEach(function (element) {
    element.addEventListener('mouseover', function () {
      this.classList.add('active');
      clearInterval(autoSlider);
    });

    element.addEventListener('mouseleave', function () {
      this.classList.remove('active');
      startAutoSlider();
    });
  });

  // Auto slider
  function startAutoSlider() {
    autoSlider = setInterval(function () {
      plusSlides(1);
    }, 3000);
  }

  // Initialize auto slider
  startAutoSlider();
}
// 호출하여 슬라이더 초기화
initializeSlider();
</script>
